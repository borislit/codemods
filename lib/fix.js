"use strict";var u=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var V=Object.prototype.hasOwnProperty;var b=(t,r)=>{for(var e in r)u(t,e,{get:r[e],enumerable:!0})},L=(t,r,e,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of C(r))!V.call(t,o)&&o!==e&&u(t,o,{get:()=>r[o],enumerable:!(a=y(r,o))||a.enumerable});return t};var I=t=>L(u({},"__esModule",{value:!0}),t);var S={};b(S,{default:()=>w});module.exports=I(S);var T=/.+\/+/,F=/\..+/,B=/[-_ ]([a-z])/g,A=t=>t.path.replace("/index","").replace(T,"").replace(F,""),l=t=>A(t).replace(B,r=>r.charAt(1).toUpperCase()),f=t=>l(t).charAt(0).toUpperCase()+l(t).slice(1);var P=t=>{let r={enabled:!1};return e=>{r.enabled||(r.enabled=!0,t(e))}},g=P(t=>{let r=e=>e.parent.value.type==="Program";t.registerMethods({getExportsByClassName(e){return this.find(t.ExportNamedDeclaration,{declaration:{type:"ClassDeclaration",id:{type:"Identifier",name:e}}})},getExportsByFunctionName(e){return this.find(t.ExportNamedDeclaration,{declaration:{type:"FunctionDeclaration",id:{type:"Identifier",name:e}}})},getExportsByVarName(e){return this.find(t.ExportNamedDeclaration,{declaration:{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:e}}]}})},getImportsByPackageName(e){return this.find(t.ImportDeclaration,{source:{value:e}})},getNamedExportedClasses(){return this.find(t.ExportNamedDeclaration,{declaration:{type:"ClassDeclaration",id:{type:"Identifier"}}})},getNamedExportedFunctions(){return this.find(t.ExportNamedDeclaration,{declaration:{type:"FunctionDeclaration",id:{type:"Identifier"}}})},getNamedExportedVars(){return this.find(t.ExportNamedDeclaration,{declaration:{type:"VariableDeclaration"}})},getTopLevelClasses(){return this.find(t.ClassDeclaration).filter(r)},getTopLevelFunctions(){return this.find(t.FunctionDeclaration).filter(r)},getTopLevelVariables(){return this.find(t.VariableDeclaration).filter(r)},getTopLevelClassByName(e){return this.find(t.ClassDeclaration,{id:{type:"Identifier",name:e}}).filter(r)},getTopLevelFunctionByName(e){return this.find(t.FunctionDeclaration,{id:{type:"Identifier",name:e}}).filter(r)},getTopLevelVariableByName(e){return this.find(t.VariableDeclaration,{declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:e}}]}).filter(r)},getImportedVarNames(){let e=[];return this.find(t.ImportDeclaration).forEach(a=>{a.value.specifiers.forEach(i=>{e.push(i.local.name)})}),e},getNamedExportedClassNames(){let e=[];return this.getNamedExportedClasses().forEach(a=>{let o=a.value;e.push(o.declaration.id.name)}),e},getNamedExportedFunctionNames(){let e=[];return this.getNamedExportedFunctions().forEach(a=>{let o=a.value;e.push(o.declaration.id.name)}),e},getNamedExportedVarNames(){let e=[];return this.getNamedExportedVars().forEach(a=>{a.value.declaration.declarations.forEach(i=>{e.push(i.id.name)})}),e},getTopLevelClassNames(){let e=[];return this.getTopLevelClasses().forEach(a=>{let o=a.value;e.push(o.id.name)}),e},getTopLevelFunctionNames(){let e=[];return this.getTopLevelFunctions().forEach(a=>{let o=a.value;e.push(o.id.name)}),e},getTopLevelVariableNames(){let e=[];return this.getTopLevelVariables().forEach(a=>{a.value.declarations.forEach(i=>{e.push(i.id.name)})}),e},getTopLevelVarNames(){return[].concat(this.getImportedVarNames(),this.getNamedExportedClassNames(),this.getNamedExportedFunctionNames(),this.getNamedExportedVarNames(),this.getTopLevelClassNames(),this.getTopLevelFunctionNames(),this.getTopLevelVariableNames())},exportClass(e){let a=e.value;return t.exportNamedDeclaration(t.classDeclaration(t.identifier(a.id.name),a.body,a.superClass))},exportDefaultAsNamed(e,a){let o=e.value,i=t.identifier(a),s=o.declaration;return t.exportNamedDeclaration(t.variableDeclaration("const",[t.variableDeclarator(i,s)]))},exportVarNameAsDefault(e){return t.exportDefaultDeclaration(t.identifier(e))},exportFunction(e){let a=e.value;return t.exportNamedDeclaration(t.functionDeclaration(t.identifier(a.id.name),a.params,a.body))},exportVariable(e){let a=e.value;return t.exportNamedDeclaration(t.variableDeclaration("const",a.declarations))}})});var w=(t,r)=>{let e=r.jscodeshift,a=e(t.source);if(g(e),a.find(e.ExportDefaultDeclaration).length===0){console.log("%s has no default export",t.path);return}let o=a.getTopLevelVarNames(),s=a.getImportsByPackageName("react").length>0?f(t):l(t),N=m=>m.toLowerCase()===s.toLowerCase(),h=o.find(N),x=Boolean(h),n=h||s;if(!x)return a.find(e.ExportDefaultDeclaration).insertBefore(m=>a.exportDefaultAsNamed(m,n)).replaceWith(()=>a.exportVarNameAsDefault(n)).toSource();let D=a.getExportsByClassName(n),v=a.getExportsByFunctionName(n),E=a.getExportsByVarName(n),c=a.getTopLevelClassByName(n),p=a.getTopLevelFunctionByName(n),d=a.getTopLevelVariableByName(n);if(D.length>0){console.log("%s already exports a class called %s",t.path,n);return}if(v.length>0){console.log("%s already exports a function called %s",t.path,n);return}if(E.length>0){console.log("%s already exports a const called %s",t.path,n);return}if(c.length>0)return console.log("%s has a class called %s which is not exported",t.path,n),c.replaceWith(()=>a.exportClass(c.get())).toSource();if(p.length>0)return console.log("%s has a function called %s which is not exported",t.path,n),p.replaceWith(()=>a.exportFunction(p.get())).toSource();if(d.length>0)return console.log("%s has a variable called %s which is not exported",t.path,n),d.replaceWith(()=>a.exportVariable(d.get())).toSource()};0&&(module.exports={});
//# sourceMappingURL=fix.js.map
